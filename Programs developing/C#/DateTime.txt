public string FormatSeconds(double secs, bool showHours, bool showMinutes, bool showSeconds, bool showMilliseconds)
{
    TimeSpan t = TimeSpan.FromSeconds(secs);

    var strHours = string.Empty;
    if (showHours)
        strHours = string.Format("{0:D2} час. ", t.Hours);
    var strMinutes = string.Empty;
    if (showMinutes)
        strMinutes = string.Format("{0:D2} мин. ", t.Minutes);
    var strSeconds = string.Empty;
    if (showSeconds)
        strSeconds = string.Format("{0:D2} сек. ", t.Seconds);
    var strMilliseconds = string.Empty;
    if (showMilliseconds)
        strMilliseconds = string.Format("{0:D3} мсек.", t.Milliseconds);

    return string.Format("{0}{1}{2}{3}",
                    strHours,
                    strMinutes,
                    strSeconds,
                    strMilliseconds);
}